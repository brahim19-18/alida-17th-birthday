<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Alida's 17th Birthday!</title>
    <style>
        body {
            font-family: 'Comic Sans MS', cursive, sans-serif;
            background-color: #ffebf3;
            color: #d23369;
            text-align: center;
            margin: 0;
            padding: 0;
            overflow-x: hidden;
        }
        
        .container {
            max-width: 800px;
            margin: 0 auto;
            padding: 20px;
        }
        
        h1 {
            font-size: 3em;
            text-shadow: 2px 2px 4px rgba(0,0,0,0.2);
            animation: rainbow 5s infinite;
        }
        
        @keyframes rainbow {
            0% { color: #ff0000; }
            14% { color: #ff7f00; }
            28% { color: #ffff00; }
            42% { color: #00ff00; }
            57% { color: #0000ff; }
            71% { color: #4b0082; }
            85% { color: #9400d3; }
            100% { color: #ff0000; }
        }
        
        .header {
            background-color: #ff9ec6;
            padding: 20px;
            border-radius: 15px;
            margin-bottom: 30px;
            box-shadow: 0 4px 8px rgba(0,0,0,0.1);
        }
        
        .age-counter {
            font-size: 1.5em;
            background-color: white;
            display: inline-block;
            padding: 10px 20px;
            border-radius: 50px;
            margin: 10px;
            box-shadow: 0 2px 4px rgba(0,0,0,0.1);
        }
        
        .section {
            background-color: white;
            border-radius: 15px;
            padding: 20px;
            margin-bottom: 30px;
            box-shadow: 0 4px 8px rgba(0,0,0,0.1);
            text-align: left;
        }
        
        .timeline {
            display: flex;
            overflow-x: auto;
            padding: 20px 0;
            gap: 15px;
        }
        
        .timeline-item {
            min-width: 200px;
            background-color: #f8f8f8;
            border-radius: 10px;
            padding: 15px;
            box-shadow: 0 2px 4px rgba(0,0,0,0.1);
        }
        
        .bingo-grid {
            display: grid;
            grid-template-columns: repeat(3, 1fr);
            gap: 10px;
            margin-top: 20px;
        }
        
        .bingo-cell {
            background-color: #ffd6e7;
            padding: 15px;
            border-radius: 10px;
            cursor: pointer;
            transition: all 0.3s;
        }
        
        .bingo-cell:hover {
            background-color: #ff9ec6;
            transform: scale(1.05);
        }
        
        .bingo-cell.selected {
            background-color: #d23369;
            color: white;
            text-decoration: line-through;
        }
        
        .quiz-question {
            margin-bottom: 20px;
        }
        
        .quiz-options {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 10px;
        }
        
        .quiz-option {
            background-color: #ffd6e7;
            padding: 10px;
            border-radius: 10px;
            cursor: pointer;
            transition: all 0.3s;
        }
        
        .quiz-option:hover {
            background-color: #ff9ec6;
        }
        
        .quiz-option.selected {
            background-color: #d23369;
            color: white;
            text-decoration: line-through;
        }
        
        .roast {
            background-color: #f8f8f8;
            padding: 15px;
            border-radius: 10px;
            margin-bottom: 10px;
        }
        
        .interactive-buttons {
            display: flex;
            justify-content: center;
            gap: 15px;
            margin: 20px 0;
            flex-wrap: wrap;
        }
        
        .interactive-button {
            background-color: #ff9ec6;
            color: white;
            border: none;
            padding: 10px 20px;
            border-radius: 50px;
            cursor: pointer;
            font-weight: bold;
            transition: all 0.3s;
        }
        
        .interactive-button:hover {
            background-color: #d23369;
            transform: scale(1.1);
        }
        
        .music-button {
            background-color: #a78bfa;
            margin: 5px;
        }
        
        .footer {
            margin-top: 40px;
            font-size: 0.8em;
            color: #999;
        }
        
        .alida-photo {
            width: 200px;
            border-radius: 15px;
            border: 5px solid #ff9ec6;
            margin: 20px auto;
            display: block;
        }
        
        .countdown {
            font-size: 1.5em;
            font-weight: bold;
            color: #d23369;
        }

        .luminous-circle {
            position: fixed;
            top: -10px;
            width: 10px;
            height: 10px;
            border-radius: 50%;
            background: radial-gradient(circle, #fff 0%, #ffd6e7 70%, transparent 100%);
            opacity: 0.8;
            animation: fall 5s linear infinite;
            z-index: 1000;
        }

        @keyframes fall {
            0% { transform: translateY(-10px); opacity: 0.8; }
            100% { transform: translateY(110vh); opacity: 0; }
        }

        .confetti {
            position: fixed;
            width: 10px;
            height: 10px;
            background-color: #f00;
            opacity: 0.7;
            animation: confetti-fall 5s linear infinite;
            z-index: 1000;
        }
        
        @keyframes confetti-fall {
            0% {
                transform: translateY(-100vh) rotate(0deg);
            }
            100% {
                transform: translateY(100vh) rotate(360deg);
            }
        }
        
        .music-player {
            margin: 20px 0;
        }
        
        .now-playing {
            font-style: italic;
            margin-top: 10px;
        }
        
        #currentSong {
            font-weight: bold;
            color: #d23369;
        }
        
        #interactiveResult {
            min-height: 100px;
            margin-top: 20px;
        }

        .countup-overlay {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background-color: rgba(255, 235, 243, 0.9);
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            z-index: 9999;
        }
        
        .countup-number {
            font-size: 10em;
            font-weight: bold;
            color: #d23369;
            text-shadow: 0 0 20px #ff9ec6;
            animation: pulse 0.5s alternate infinite;
        }
        
        .countup-message {
            font-size: 2em;
            margin-top: 20px;
            color: #d23369;
        }
        
        @keyframes pulse {
            from { transform: scale(1); }
            to { transform: scale(1.1); }
        }

        .main-content {
            display: none;
        }

        /* Dance option styles */
        .dance-option {
            background-color: #ffd6e7;
            padding: 10px;
            border-radius: 10px;
            margin: 5px 0;
            cursor: pointer;
            transition: all 0.3s;
        }
        
        .dance-option:hover {
            background-color: #ff9ec6;
            transform: scale(1.05);
        }
        
        .dance-option.selected {
            background-color: #d23369;
            color: white;
        }
        
        #danceStatus {
            margin-top: 10px;
            font-style: italic;
        }
        
        /* New Gift Button Styles */
        .gift-button-container {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background-color: rgba(255, 235, 243, 0.9);
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            z-index: 10000;
        }
        
        .gift-button {
            position: relative;
            background-color: #d23369;
            color: white;
            border: none;
            padding: 15px 30px;
            font-size: 1.5em;
            border-radius: 50px;
            cursor: pointer;
            font-weight: bold;
            transition: all 0.3s;
            box-shadow: none;
            border: 3px solid transparent;
            animation: border-glow 2s infinite alternate;
        }

        @keyframes border-glow {
            0% {
                border-color: rgba(255, 158, 198, 0.7);
                box-shadow: 0 0 10px rgba(255, 158, 198, 0.7), 
                           inset 0 0 10px rgba(255, 158, 198, 0.7);
            }
            100% {
                border-color: rgba(210, 51, 105, 0.9);
                box-shadow: 0 0 25px rgba(210, 51, 105, 0.9), 
                          inset 0 0 15px rgba(210, 51, 105, 0.9);
            }
        }

        .gift-button:hover {
            transform: scale(1.05);
            background-color: #ff9ec6;
        }

        .gift-message {
            font-size: 1.5em;
            margin-top: 20px;
            color: #d23369;
        }

        /* Video styles */
        .video-container {
            width: 200px; /* Same width as original image */
            height: 355px; /* 9:16 aspect ratio */
            margin: 20px auto;
            border-radius: 15px;
            overflow: hidden;
            border: 5px solid #ff9ec6;
        }
        
        .video-container video {
            width: 100%;
            height: 100%;
            object-fit: cover;
        }

        /* Multiplayer Game Styles */
        .multiplayer-game {
            display: none; /* Hidden by default */
            background-color: white;
            border-radius: 15px;
            padding: 20px;
            margin-bottom: 30px;
            box-shadow: 0 4px 8px rgba(0,0,0,0.1);
        }

        .game-container {
            display: flex;
            flex-direction: column;
            gap: 20px;
        }

        .game-id-input {
            display: flex;
            gap: 10px;
            margin-bottom: 15px;
        }

        .game-id-input input {
            flex: 1;
            padding: 10px;
            border-radius: 10px;
            border: 2px solid #ff9ec6;
        }

        .game-id-input button {
            background-color: #ff9ec6;
            color: white;
            border: none;
            padding: 10px 20px;
            border-radius: 10px;
            cursor: pointer;
            font-weight: bold;
        }

        .game-scores {
            display: flex;
            justify-content: space-between;
            margin-bottom: 15px;
        }
        
        .score-display {
            background-color: #ffd6e7;
            padding: 10px 15px;
            border-radius: 10px;
            font-weight: bold;
        }
        
        .progress-display {
            background-color: #a78bfa;
            color: white;
            padding: 10px 15px;
            border-radius: 10px;
            font-weight: bold;
        }

        .game-question {
            font-size: 1.2em;
            margin-bottom: 15px;
            font-weight: bold;
        }

        .game-answer-input {
            display: flex;
            gap: 10px;
            margin-bottom: 15px;
        }

        .game-answer-input input {
            flex: 1;
            padding: 10px;
            border-radius: 10px;
            border: 2px solid #ff9ec6;
        }

        .game-answer-input button {
            background-color: #a78bfa;
            color: white;
            border: none;
            padding: 10px 20px;
            border-radius: 10px;
            cursor: pointer;
            font-weight: bold;
        }

        .answers-container {
            display: flex;
            justify-content: space-between;
            gap: 20px;
        }

        .player-answer {
            flex: 1;
            background-color: #ffebf3;
            padding: 15px;
            border-radius: 10px;
            min-height: 100px;
        }

        .player-label {
            font-weight: bold;
            color: #d23369;
            margin-bottom: 10px;
        }

        .waiting-message {
            text-align: center;
            font-style: italic;
            color: #999;
        }
    </style>
</head>
<body>
    <div id="giftButtonContainer" class="gift-button-container">
        <button class="gift-button" id="giftButton">üéÅ Take Your Gift!</button>
        <div class="gift-message">Click to reveal your special birthday surprise!</div>
    </div>
    
    <div id="countupOverlay" class="countup-overlay" style="display: none;">
        <div class="countup-number">1</div>
        <div class="countup-message">Get ready for the celebration!</div>
    </div>
    
    <div id="mainContent" class="main-content">
        <div class="container">
            <div class="header">
                <h1>üéâ Alida's 17th Birthday! üéâ</h1>
                <img src="images/alida1.jpg" alt="Alida" class="alida-photo">
                <div class="age-counter">17 years of learning and progress!</div>
                <p>Welcome to the most official (and slightly chaotic) celebration of Alida's existence!</p>
            </div>
            
            <div class="section">
                <h2>üé∂ Bubble Sound (feat. Fleekman)</h2>
                <div class="music-player">
                    <audio id="bubbleSound" controls style="width: 100%">
                        <source src="audio/bubble-sound.mp3" type="audio/mpeg">
                        Your browser does not support the audio element.
                    </audio>
                    <p class="now-playing">Alida's favorite song</p>
                </div>
            </div>
            
            <div class="section">
                <h2>‚è≥ Birthday Countdup</h2>
                <div class="countdown" id="countdown"></div>
            </div>
            
            <div class="section">
                <h2>üìú The Alida Timeline</h2>
                <p>From early childhood to becoming a dreamy girl!</p>
                
                <div class="timeline">
                    <div class="timeline-item">
                        <h3>Age 5</h3>
                        <p>First The appearance of the most naughty Uzbek girl.</p>
                    </div>
                    <div class="timeline-item">
                        <h3>Age 10</h3>
                        <p>I think this is the beginning of the emergence of the smartest Uzbek girl.</p>
                    </div>
                    <div class="timeline-item">
                        <h3>Age 13</h3>
                        <p>The beginning of puberty and the brightness in the sky of Tashkent.</p>
                    </div>
                    <div class="timeline-item">
                        <h3>Age 16</h3>
                        <p>I met the most beautiful Uzbek girl ever, who has the features of a Chinese girl.</p>
                    </div>
                    <div class="timeline-item">
                        <h3>Age 17</h3>
                        <p>The stage of stability and following the mind to a better and bright future.</p>
                    </div>
                </div>
            </div>
            
            <div class="section">
                <h2>üé≤ Birthday Bingo!</h2>
                <p>Will Alida do these things today? Mark them as they happen!</p>
                
                <div class="bingo-grid">
                    <div class="bingo-cell">Say "I don't feel 17" 3+ times</div>
                    <div class="bingo-cell">Check who wished you a happy birthday</div>
                    <div class="bingo-cell">holding flowers in your hands</div>
                    <div class="bingo-cell">Make a birthday wish</div>
                    <div class="bingo-cell">FREE SPACE</div>
                    <div class="bingo-cell">Deny that you are not a Chinese girl</div>
                    <div class="bingo-cell">Say "A famous quote by Alida!"</div>
                    <div class="bingo-cell">going for a walk</div>
                    <div class="bingo-cell">To wonder what your future holds for you</div>
                </div>
            </div>
            
            <div class="section">
                <h2>ü§î How Well Do You Know Alida?</h2>
                <p>A totally serious and not-at-all-made-up quiz</p>
                
                <div class="quiz-question">
                    <h3>1. Alida's real age is:</h3>
                    <div class="quiz-options">
                        <div class="quiz-option" data-question="1">A) 17</div>
                        <div class="quiz-option" data-question="1">B) 17 going on 7</div>
                        <div class="quiz-option" data-question="1">C) Ageless queen</div>
                        <div class="quiz-option" data-question="1">D) Old enough to know better, young enough to do it anyway</div>
                    </div>
                </div>
                
                <div class="quiz-question">
                    <h3>2. Alida's spirit animal is:</h3>
                    <div class="quiz-options">
                        <div class="quiz-option" data-question="2">A) Miraculous Ladybug</div>
                        <div class="quiz-option" data-question="2">B) Winnie the pooth</div>
                        <div class="quiz-option" data-question="2">C) Pretty Kitty</div>
                        <div class="quiz-option" data-question="2">D) All of the above</div>
                    </div>
                </div>
                
                <div class="quiz-question">
                    <h3>3. Her ideal birthday gift?</h3>
                    <div class="quiz-options">
                        <div class="quiz-option" data-question="3">A) Money (duh)</div>
                        <div class="quiz-option" data-question="3">B) Somethiong you asked your parents to buy for you</div>
                        <div class="quiz-option" data-question="3">C) Meeting with BTS especilly V</div>
                        <div class="quiz-option" data-question="3">D) Travel to a place you want</div>
                    </div>
                </div>
            </div>
            
            <div class="section">
                <h2>üëΩ Space Friendo</h2>
                <p>My Uzbek friend</p>
                
                <div class="roast">
                    <p>All the best on your special day, my friend.
‚ÄéI hope this day brings you immense happiness, joy, and fun, and that nothing ruins your mood on this special occasion of yours.
‚ÄéI wanted to tell you, on this occasion, that you have always been a dear friend to me and a meaningful presence in my life. You are a special person who entered my life, and I don't think it's just me who feels that way everyone lucky enough to share a day with you must feel the same. With your captivating, wise, and elegant personality, you truly found a place in my heart.
‚ÄéI hope you always hold on to that unique personality of yours, and that you shine in your future, reach your dreams and ambitions, and always be proud of being Alida.
‚ÄéI know we don't talk anymore, but I will still wish you the best.
Friendo üëΩ</p>
                </div>
            </div>

            <!-- New Multiplayer Game Section -->
            <div class="section multiplayer-game" id="multiplayerGame">
                <h2>üéÆ Alida-ology</h2>
                <p>Challenge a friend to answer fun questions about Alida!</p>
                
                <div class="game-container" id="gameSetup">
                    <div class="game-id-input">
                        <input type="text" id="gameIdInput" placeholder="Enter game ID (e.g., ALIDA123)">
                        <button id="joinGameBtn">Join Game</button>
                    </div>
                    <div id="joinStatus" class="join-status"></div>
                    <p>Or create a new game:</p>
                    <button id="createGameBtn" class="interactive-button">Create New Game</button>
                </div>
                
                <div class="game-container" id="gamePlay" style="display: none;">
                    <div class="game-scores">
                        <div class="score-display" id="scoreDisplay">Score: 0</div>
                        <div class="progress-display" id="progressDisplay">Question 1 of 71</div>
                    </div>
                    
                    <div class="game-question" id="currentQuestion"></div>
                    
                    <div class="game-answer-input">
                        <input type="text" id="playerAnswer" placeholder="Your answer...">
                        <button id="submitAnswerBtn">Done</button>
                    </div>
                    
                    <div class="answers-container">
                        <div class="player-answer">
                            <div class="player-label">Your Answer:</div>
                            <div id="player1Answer" class="waiting-message">Waiting for your answer...</div>
                        </div>
                        <div class="player-answer">
                            <div class="player-label">Friend's Answer:</div>
                            <div id="player2Answer" class="waiting-message">Waiting for friend to answer...</div>
                        </div>
                    </div>
                    
                    <button id="nextQuestionBtn" class="interactive-button" style="display: none;">Next Question</button>
                </div>
            </div>
            
            <div class="section">
                <h2>ü§πüèª‚Äç‚ôÄÔ∏è Interactive Fun</h2>
                
                <div class="interactive-buttons">
                    <button class="interactive-button" id="ageUpBtn">Age-Up Machine</button>
                    <button class="interactive-button" id="danceBtn">Birthday Dance-Off</button>
                    <button class="interactive-button" id="complimentBtn">Realistic Compliments</button>
                    <button class="interactive-button" id="videoBtn">The Art Of Messing You</button>
                </div>
                
                <div id="interactiveResult"></div>
            </div>
            
            <div class="section">
                <h2>‚è≥ Your dreams will come true</h2>
                <p id="finalCountdown">There is not much left for your journey to begin. I wish you great happiness and may God bless you in that, "Stay safe, happy, thrive, shine, and know you're always in my heart üíñ"</p>
            </div>
            
            <div class="footer">
                <p>Made with 1% Mind, 99% Heart. Happy 17th, Alida! üéÇ</p>
            </div>
        </div>
    </div>

    <!-- Audio elements -->
    <audio id="countupSound" style="display:none">
        <source src="audio/countup-sound.mp3" type="audio/mpeg">
        Your browser does not support the audio element.
    </audio>

    <audio id="birthdayMusic" style="display:none">
        <source src="audio/birthday-music.mp3" type="audio/mpeg">
        Your browser does not support the audio element.
    </audio>

    <!-- Dance songs -->
    <audio id="rockyourbodySound" style="display:none">
        <source src="audio/rockyourbody-sound.mp3" type="audio/mpeg">
    </audio>
    
    <audio id="wakawakaSound" style="display:none">
        <source src="audio/wakawaka-sound.mp3" type="audio/mpeg">
    </audio>
    
    <audio id="damaungurSound" style="display:none">
        <source src="audio/damaungur-sound.mp3" type="audio/mpeg">
    </audio>

    <!-- Firebase SDK -->
    <script src="https://www.gstatic.com/firebasejs/8.10.0/firebase-app.js"></script>
    <script src="https://www.gstatic.com/firebasejs/8.10.0/firebase-database.js"></script>

    <script>
        // Firebase configuration
        const firebaseConfig = {
            apiKey: "AIzaSyBW1G2_hrfpve6kf3BraRJxqgIlJHWM2ds",
            authDomain: "alida-birthday.firebaseapp.com",
            databaseURL: "https://alida-birthday-default-rtdb.firebaseio.com",
            projectId: "alida-birthday",
            storageBucket: "alida-birthday.firebasestorage.app",
            messagingSenderId: "1078987515245",
            appId: "1:1078987515245:web:34599c524a11a0c9ffa664",
            measurementId: "G-7EJWLM35QL"
        };

        // Initialize Firebase
        firebase.initializeApp(firebaseConfig);
        const database = firebase.database();

        // Game variables
        let gameId = '';
        let playerNumber = 0;
        let player1Score = 0;
        let player2Score = 0;
        let questionsAnswered = 0;
        let currentQuestionIndex = 0;
        
        // Game elements
        const gameSetupDiv = document.getElementById('gameSetup');
        const gamePlayDiv = document.getElementById('gamePlay');
        const gameIdInput = document.getElementById('gameIdInput');
        const joinGameBtn = document.getElementById('joinGameBtn');
        const createGameBtn = document.getElementById('createGameBtn');
        const currentQuestionDiv = document.getElementById('currentQuestion');
        const playerAnswerInput = document.getElementById('playerAnswer');
        const submitAnswerBtn = document.getElementById('submitAnswerBtn');
        const nextQuestionBtn = document.getElementById('nextQuestionBtn');
        const player1AnswerDiv = document.getElementById('player1Answer');
        const player2AnswerDiv = document.getElementById('player2Answer');
        const scoreDisplay = document.getElementById('scoreDisplay');
        const progressDisplay = document.getElementById('progressDisplay');
        
        // Questions for the game
        const questions = [
            "What is Alida's favorite childhood TV show or cartoon?",
            "What is Alida's favorite music artist?",
            "What is Alida's favorite type of cuisine?",
            "What is Alida's favorite animal?",
            "What is Alida's favorite color?",
            "What is Alida's favorite song?",
            "What's Alida's favorite sport?",
            "What is Alida's favorite type of movies?",
            "What is Alida's favorite drink?",
            "What is Alida's all-time favorite movie?",
            "What's Alida's favorite thing to do on weekends?",
            "What is Alida's favorite book or genre?",
            "What's Alida's favorite subject in school?",
            "What's Alida's favorite type of weather?",
            "What's Alida's favorite way to relax?",
            "What's Alida's favorite childhood toy?",
            "What's Alida's favorite type of music?",
            "What's Alida's favorite board game?",
            "What's Alida's favorite ice cream flavor?",
            "What's Alida's favorite place to hang out?",
            "What's Alida's favorite thing about herself?",
            "What is the best season for Alida?",
            "What is Alida's zodiac sign, and does she believe in astrology?",
            "What is Alida's biggest fear?",
            "What is Alida's proudest achievement?",
            "What is Alida's most embarrassing childhood story?",
            "What is Alida's most nostalgic memory?",
            "What is Alida's most controversial opinion?",
            "What is Alida's most used app on her phone?",
            "What is Alida's most random talent?",
            "What is the most common phrase used by Alida?",
            "What is the most thoughtful thing Alida has done for a friend?",
            "What is the thing in the world that you are similar to Alida?",
            "Who is the most famous person you like Alida?",
            "What is Alida's biggest pet peeve?",
            "What is Alida's weirdest habit?",
            "What is Alida's love language?",
            "What is Alida's friendship red flag?",
            "What is Alida's idea of a perfect friend hangout?",
            "What was Alida's dream job as a kid?",
            "What's Alida's guilty pleasure snack?",
            "What is something Alida is secretly really good at?",
            "What is something that always makes Alida laugh?",
            "What kind of fashion style does Alida usually wear?",
            "What emoji does Alida use way too much?",
            "What emoji best represents Alida?",
            "What ridiculous nickname did Alida have as a kid that she hopes no one remembers?",
            "Who is the person Alida loves the most?",
            "Who is Alida's celebrity crush?",
            "If Alida could have dinner with anyone, who would it be?",
            "If Alida could swap lives with anyone for a day, who would it be?",
            "If Alida could be any fictional character for a day, who would she be?",
            "If Alida could live in any fictional world, where would she choose?",
            "If Alida could time travel, where/when would she go?",
            "If Alida could go to karaoke, would you go and what song would you sing?",
            "If Alida was a kitchen appliance, what would she be and why?",
            "If Alida were a superhero, What will be her name and what would her power be?",
            "What would be Alida's superhero name?",
            "If Alida had a talk show, what would it be called?",
            "If Alida was a weather phenomenon, what would she be?",
            "If Alida were stuck on a deserted island, what 3 things would she bring?",
            "What fictional character is most like Alida?",
            "What's the most Alida-like animal",
            "What's Alida's spirit food?",
            "What would Alida's autobiography be titled?",
            "What's the weirdest thing Alida has ever researched on web?",
            "Which country would Alida like to visit?",
            "How does Alida usually cheer up her friends?",
            "Is Alida more of a morning person or night owl?",
            "Does Alida prefer sweet or savory snacks?",
            "What were Alida's last words to you in chat?",
            "What is Alida's hobby?",
            "What's Alida's biggest dream?",
            "Did you like the questions"
        ];
        
        const totalQuestions = questions.length;

        // Gift button click handler
        document.getElementById('giftButton').addEventListener('click', function() {
            document.getElementById('giftButtonContainer').style.display = 'none';
            startCountup();
        });

        // Function for the initial 1-17 countup
        function startCountup() {
            document.getElementById('countupOverlay').style.display = 'flex';
            
            let count = 1;
            const countupElement = document.querySelector('.countup-number');
            const countupAudio = document.getElementById('countupSound');
            const birthdayMusic = document.getElementById('birthdayMusic');
            
            countupAudio.play().catch(e => console.log("Countup audio play failed:", e));
            birthdayMusic.loop = true;
            birthdayMusic.play().catch(e => console.log("Birthday music play failed:", e));
            
            const timer = setInterval(() => {
                count++;
                countupElement.textContent = count;
                
                if (count >= 17) {
                    clearInterval(timer);
                    setTimeout(() => {
                        document.getElementById('countupOverlay').style.display = 'none';
                        document.getElementById('mainContent').style.display = 'block';
                        initializeMainPage();
                    }, 1724);
                }
            }, 1724);
        }
        
        // Initialize the main page after countup
        function initializeMainPage() {
            const audio = document.getElementById('bubbleSound');
            const playPromise = audio.play();
            
            if (playPromise !== undefined) {
                playPromise.catch(error => {
                    const playButton = document.createElement('button');
                    playButton.className = 'interactive-button';
                    playButton.textContent = 'Click to Play Music';
                    playButton.style.marginTop = '10px';
                    playButton.addEventListener('click', () => {
                        audio.play();
                        playButton.remove();
                    });
                    document.querySelector('.music-player').appendChild(playButton);
                });
            }
            
            createConfetti();
            createLuminousCircles();
            updateCountdown();
            setInterval(updateCountdown, 1000);
            updateFinalCountdown();
            setInterval(updateFinalCountdown, 86400000);
            
            // Show the multiplayer game section
            document.getElementById('multiplayerGame').style.display = 'block';
        }

        // Quiz functionality
        document.querySelectorAll('.quiz-option').forEach(option => {
            option.addEventListener('click', function() {
                const questionNum = this.getAttribute('data-question');
                document.querySelectorAll(`.quiz-option[data-question="${questionNum}"]`).forEach(opt => {
                    opt.classList.remove('selected');
                });
                this.classList.add('selected');
            });
        });

        // Bingo functionality
        document.querySelectorAll('.bingo-cell').forEach(cell => {
            cell.addEventListener('click', () => cell.classList.toggle('selected'));
        });
        
        // Interactive buttons
        document.getElementById('ageUpBtn').addEventListener('click', () => {
            document.getElementById('interactiveResult').innerHTML = `
                <h3>Future Alida at 20:</h3>
                <p>‚òï Coffee addiction fully developed</p>
                <p>‚úàÔ∏è Travel around the world</p>
                <p>üéâ Be the first in your field</p>
                <p>ü§∑‚Äç‚ôÄÔ∏è Something else</p>`;
            createConfetti();
        });
        
        document.getElementById('danceBtn').addEventListener('click', () => {
            document.getElementById('interactiveResult').innerHTML = `
                <h3>Choose a Dance Move:</h3>
                <div class="dance-option" data-song="rockyourbody">üëØ‚Äç‚ôÄÔ∏è Rock Your Body ‚Üí With you partner</div>
                <div class="dance-option" data-song="wakawaka">üíÉüèª Waka Waka ‚Üí Move gracefully</div>
                <div class="dance-option" data-song="damaungur">üå∫ Pretty Little Baby ‚Üí I'm so in love with you</div>
                <div id="danceStatus" style="margin-top:10px;"></div>`;
            
            document.querySelectorAll('.dance-option').forEach(option => {
                option.addEventListener('click', function() {
                    document.querySelectorAll('.dance-option').forEach(opt => opt.classList.remove('selected'));
                    this.classList.add('selected');
                    
                    const songType = this.getAttribute('data-song');
                    const statusElement = document.getElementById('danceStatus');
                    
                    document.getElementById('rockyourbodySound').pause();
                    document.getElementById('wakawakaSound').pause();
                    document.getElementById('damaungurSound').pause();
                    
                    let song, danceName;
                    switch(songType) {
                        case 'rockyourbody':
                            song = document.getElementById('rockyourbodySound');
                            danceName = "Rock your body"; break;
                        case 'wakawaka':
                            song = document.getElementById('wakawakaSound');
                            danceName = "Waka Waka"; break;
                        case 'damaungur':
                            song = document.getElementById('damaungurSound');
                            danceName = "Pretty little baby"; break;
                    }
                    
                    song.currentTime = 0;
                    song.play()
                        .then(() => {
                            statusElement.innerHTML = `Now playing: <strong>${danceName}</strong>`;
                            createConfetti();
                        })
                        .catch(e => {
                            statusElement.innerHTML = `Couldn't play ${danceName} song: ${e.message}`;
                        });
                });
            });
        });
        
        document.getElementById('complimentBtn').addEventListener('click', () => {
            const compliments = [
                "You're... uh... not Chinese!",
                "Your hair looks nice today!",
                "You're pretty... I'm sure.",
                "You're the moon... we know that!",
                "You're aging like... a person!",
                "The most beautiful Uzbek girl!",
                "My friend... despite the distance!",
                "I love... your smile!",
                "Your eyes... are indescribable!",
                "Your intelligence is sometimes deceiving!",
                "Your voice... I heard it once... it suits you!",
                "You're 17! That's a number!"
            ];
            document.getElementById('interactiveResult').innerHTML = `
                <h3>Compliment:</h3>
                <p>${compliments[Math.floor(Math.random() * compliments.length)]}</p>`;
        });

        // New video button functionality
        document.getElementById('videoBtn').addEventListener('click', () => {
            document.getElementById('interactiveResult').innerHTML = `
                <h3>Every message feels like a risk... so</h3>
                <div class="video-container">
                    <video controls autoplay>
                        <source src="videos/special-message.mp4" type="video/mp4">
                        Your browser does not support the video tag.
                    </video>
                </div>`;
            createConfetti();
        });

        function createLuminousCircles() {
           setInterval(() => {
                const circle = document.createElement('div');
                circle.className = 'luminous-circle';
                circle.style.left = Math.random() * 100 + 'vw';
                circle.style.width = circle.style.height = (Math.random() * 8 + 4) + 'px';
                circle.style.animationDuration = (Math.random() * 3 + 2) + 's';
                document.body.appendChild(circle);
                setTimeout(() => circle.remove(), 5000);
            }, 200);
        }

        function updateCountdown() {
            const birthday = new Date(2008, 7, 6);
            const now = new Date();
            const diff = now - birthday;

            const days = Math.floor(diff / (1000 * 60 * 60 * 24));
            const hours = Math.floor((diff % (1000 * 60 * 60 * 24)) / (1000 * 60 * 60));
            const minutes = Math.floor((diff % (1000 * 60 * 60)) / (1000 * 60));
            const seconds = Math.floor((diff % (1000 * 60)) / 1000);

            document.getElementById('countdown').innerHTML =
            `${days} days ${hours}h ${minutes}m ${seconds}s since Alida's birthday on August 6, 2008!`;
        }

        function updateFinalCountdown() {
            // Your existing countdown logic
        }

        function createConfetti() {
            const colors = ['#ff0000', '#00ff00', '#0000ff', '#ffff00', '#ff00ff', '#00ffff'];
            for (let i = 0; i < 50; i++) {
                const confetti = document.createElement('div');
                confetti.className = 'confetti';
                confetti.style.left = Math.random() * 100 + 'vw';
                confetti.style.backgroundColor = colors[Math.floor(Math.random() * colors.length)];
                confetti.style.width = Math.random() * 10 + 5 + 'px';
                confetti.style.height = Math.random() * 10 + 5 + 'px';
                confetti.style.animationDuration = Math.random() * 3 + 2 + 's';
                document.body.appendChild(confetti);
                setTimeout(() => confetti.remove(), 5000);
            }
        }

        // Multiplayer Game Functions
        function generateGameId() {
            return 'ALIDA' + Math.floor(1000 + Math.random() * 9000);
        }

        function createNewGame() {
            gameId = generateGameId();
            playerNumber = 1;
            player1Score = 0;
            player2Score = 0;
            questionsAnswered = 0;
            
            const gameRef = database.ref('games/' + gameId);
            gameRef.set({
                player1: { answer: '', answered: false },
                player2: { answer: '', answered: false },
                currentQuestion: 0,
                gameStarted: true
            });
            
            setupGameListeners(gameRef);
            gameSetupDiv.style.display = 'none';
            gamePlayDiv.style.display = 'block';
            showQuestion(0);
            updateScoreDisplay();
            
            alert(`Game created! Share this ID with a friend: ${gameId}`);
        }

        function joinExistingGame() {
            gameId = gameIdInput.value.trim();
            if (!gameId) {
                alert('Please enter a game ID');
                return;
            }
            
            playerNumber = 2;
            player1Score = 0;
            player2Score = 0;
            questionsAnswered = 0;
            
            const gameRef = database.ref('games/' + gameId);
            gameRef.once('value').then((snapshot) => {
                const gameData = snapshot.val();
                
                if (!gameData) {
                    alert('Game not found. Please check the ID.');
                    return;
                }
                
                setupGameListeners(gameRef);
                gameSetupDiv.style.display = 'none';
                gamePlayDiv.style.display = 'block';
                showQuestion(gameData.currentQuestion || 0);
                updateScoreDisplay();
                
                alert(`Joined game ${gameId}!`);
            });
        }

        function setupGameListeners(gameRef) {
            gameRef.on('value', (snapshot) => {
                const gameData = snapshot.val();
                if (!gameData) return;
                
                if (gameData.currentQuestion !== currentQuestionIndex) {
                    currentQuestionIndex = gameData.currentQuestion;
                    showQuestion(currentQuestionIndex);
                }
                
                updateAnswersDisplay(gameData);
            });
        }

        function showQuestion(index) {
            if (index >= questions.length) {
                currentQuestionDiv.textContent = "Game Over! Thanks for playing!";
                playerAnswerInput.style.display = 'none';
                submitAnswerBtn.style.display = 'none';
                nextQuestionBtn.style.display = 'none';
                
                // Show final scores
                const finalScore = playerNumber === 1 ? player1Score : player2Score;
                scoreDisplay.textContent = `Final Score: ${finalScore}`;
                progressDisplay.textContent = `Completed ${questionsAnswered} of ${totalQuestions}`;
                return;
            }
            
            currentQuestionIndex = index;
            currentQuestionDiv.textContent = questions[index];
            player1AnswerDiv.textContent = "Waiting for your answer...";
            player2AnswerDiv.textContent = "Waiting for friend to answer...";
            player1AnswerDiv.className = "waiting-message";
            player2AnswerDiv.className = "waiting-message";
            playerAnswerInput.value = '';
            playerAnswerInput.disabled = false;
            submitAnswerBtn.disabled = false;
            nextQuestionBtn.style.display = 'none';
            
            updateProgressDisplay();
        }

        function updateAnswersDisplay(gameData) {
            if (playerNumber === 1) {
                if (gameData.player1.answered) {
                    player1AnswerDiv.textContent = gameData.player1.answer || "(No answer)";
                    player1AnswerDiv.className = "";
                }
                if (gameData.player2.answered) {
                    player2AnswerDiv.textContent = gameData.player2.answer || "(No answer)";
                    player2AnswerDiv.className = "";
                }
            } else {
                if (gameData.player2.answered) {
                    player1AnswerDiv.textContent = gameData.player2.answer || "(No answer)";
                    player1AnswerDiv.className = "";
                }
                if (gameData.player1.answered) {
                    player2AnswerDiv.textContent = gameData.player1.answer || "(No answer)";
                    player2AnswerDiv.className = "";
                }
            }
            
            // Check if both answered to update scores
            if (gameData.player1.answered && gameData.player2.answered) {
                nextQuestionBtn.style.display = 'block';
                
                // Calculate similarity between answers
                const answer1 = (gameData.player1.answer || "").toLowerCase().trim();
                const answer2 = (gameData.player2.answer || "").toLowerCase().trim();
                
                // Only score if this is the first time both have answered this question
                if (!gameData.scored) {
                    questionsAnswered++;
                    
                    if (answer1 && answer2 && areAnswersSimilar(answer1, answer2)) {
                        if (playerNumber === 1) {
                            player1Score++;
                        } else {
                            player2Score++;
                        }
                        updateScoreDisplay();
                        
                        // Mark that we've scored this question
                        database.ref('games/' + gameId).update({
                            scored: true
                        });
                    }
                }
            }
            
            updateProgressDisplay();
        }

        function areAnswersSimilar(answer1, answer2) {
            // Simple check - answers are similar if they share at least one word
            const words1 = answer1.split(/\s+/);
            const words2 = answer2.split(/\s+/);
            
            return words1.some(word => words2.includes(word)) || 
                   words2.some(word => words1.includes(word));
        }

        function updateScoreDisplay() {
            const score = playerNumber === 1 ? player1Score : player2Score;
            scoreDisplay.textContent = `Score: ${score}`;
        }

        function updateProgressDisplay() {
            progressDisplay.textContent = `Question ${currentQuestionIndex + 1} of ${totalQuestions}`;
        }

        function submitAnswer() {
            const answer = playerAnswerInput.value.trim();
            if (!answer) {
                alert('Please enter an answer');
                return;
            }
            
            const gameRef = database.ref('games/' + gameId);
            const playerKey = playerNumber === 1 ? 'player1' : 'player2';
            
            gameRef.update({
                [playerKey]: {
                    answer: answer,
                    answered: true
                },
                scored: false // Reset scored flag when new answers are submitted
            });
            
            playerAnswerInput.disabled = true;
            submitAnswerBtn.disabled = true;
        }

        function goToNextQuestion() {
            const gameRef = database.ref('games/' + gameId);
            gameRef.update({
                currentQuestion: currentQuestionIndex + 1,
                player1: { answer: '', answered: false },
                player2: { answer: '', answered: false },
                scored: false
            });
        }

        // Game event listeners
        createGameBtn.addEventListener('click', createNewGame);
        joinGameBtn.addEventListener('click', joinExistingGame);
        submitAnswerBtn.addEventListener('click', submitAnswer);
        nextQuestionBtn.addEventListener('click', goToNextQuestion);
        playerAnswerInput.addEventListener('keypress', (e) => {
            if (e.key === 'Enter') submitAnswer();
        });

        // Initially hide the countup overlay and main content
        document.addEventListener('DOMContentLoaded', function() {
            document.getElementById('countupOverlay').style.display = 'none';
            document.getElementById('mainContent').style.display = 'none';
        });
    </script>
</body>
</html>
